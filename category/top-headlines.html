<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Top Headlines – Breaking News & Major Stories | Viral News</title>
  <meta name="description" content="Top headlines from around the world. The biggest breaking stories, major updates and trending news on Viral News." />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="canonical" href="https://viralnewsalert.com/category/top-headlines.html" />

  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="icon" href="/favicon.ico">
  <link rel="manifest" href="/site.webmanifest">
  <meta name="theme-color" content="#081737">

  <script async
    src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5368831813847678"
    crossorigin="anonymous"></script>
</head>
<body>

<nav style="padding:12px;background:#081737;display:flex;flex-wrap:wrap;gap:12px;">
  <a href="/" style="color:#fff;">Home</a>
  <a href="/category/breaking.html" style="color:#fff;">Breaking</a>
  <a href="/category/trending.html" style="color:#fff;">Trending</a>
  <a href="/category/top-headlines.html" style="color:#fff;">Top Headlines</a>
  <a href="/category/general.html" style="color:#fff;">General</a>
  <a href="/category/world.html" style="color:#fff;">World</a>
  <a href="/category/politics.html" style="color:#fff;">Politics</a>
  <a href="/category/technology.html" style="color:#fff;">Technology</a>
  <a href="/category/sports.html" style="color:#fff;">Sports</a>
  <a href="/category/health-fitness.html" style="color:#fff;">Health & Fitness</a>
  <a href="/category/entertainment.html" style="color:#fff;">Entertainment</a>
</nav>

<main style="max-width:1100px;margin:30px auto;padding:0 16px;">
  <h1>Top Headlines</h1>
  <p>The biggest stories right now — breaking news, major updates, and top trending headlines.</p>

  <section id="category-articles">
    <p>Loading top headlines…</p>
  </section>
</main>

<footer style="text-align:center;padding:20px;">
  <a href="/about-us.html">About Us</a> |
  <a href="/contact.html">Contact</a> |
  <a href="/privacy-policy.html">Privacy Policy</a> |
  <a href="/sitemap.xml">Sitemap</a>
</footer>

<script>
function stripHtml(s) {
  return (s || "").toString().replace(/<[^>]*>/g, "").replace(/\s+/g, " ").trim();
}

function pickSnippet(a) {
  // prefer summary if your backend has it
  const text = a.summary ? a.summary : (a.content || "");
  const clean = stripHtml(text);
  return clean.length > 180 ? clean.slice(0, 180) + "…" : clean;
}

async function loadTopHeadlines() {
  const container = document.getElementById("category-articles");

  try {
    // Option 1 (simple): just get a lot and show latest
    // If you later add a backend endpoint like /top-headlines, swap it here.
    const res = await fetch("https://viral-news-backend-2.onrender.com/articles/?limit=80");
    const articles = await res.json();

    if (!Array.isArray(articles) || articles.length === 0) {
      container.innerHTML = "<p>No headlines available right now.</p>";
      return;
    }

    // Sort newest first (uses published_at or created_at)
    const safeTime = (a) => a && (a.published_at || a.created_at) ? (a.published_at || a.created_at) : "";
    articles.sort((a, b) => new Date(safeTime(b)) - new Date(safeTime(a)));

    // Take top N
    const top = articles.slice(0, 30);

    container.innerHTML = top.map(a => {
      const id = a.id || a._id; // supports either id or Mongo _id
      const title = a.title || "Untitled";
      const snippet = pickSnippet(a);

      // IMPORTANT:
      // If your article viewer is /article.html?id=...
      // keep this exactly like your other category pages.
      const href = `/article.html?id=${encodeURIComponent(id)}`;

      return `
        <article style="border-bottom:1px solid #ddd;padding:14px 0;">
          <h2 style="margin:0 0 8px;">
            <a href="${href}" style="color:#081737;text-decoration:none;">
              ${title}
            </a>
          </h2>
          <p style="margin:0;color:#333;">${snippet}</p>
        </article>
      `;
    }).join("");

  } catch (e) {
    container.innerHTML = "<p>Failed to load top headlines.</p>";
    console.error(e);
  }
}

loadTopHeadlines();
</script>

</body>
</html>
